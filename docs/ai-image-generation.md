# AI Image Generation - Studio Lagosta

## üìù Vis√£o Geral

O sistema de gera√ß√£o de imagens com IA permite aos usu√°rios criar imagens personalizadas usando o modelo Gemini 2.5 Flash Image (Nano Banana) atrav√©s da API do Replicate. O sistema suporta prompts de texto, sele√ß√£o de aspect ratio e at√© 3 imagens de refer√™ncia (do Google Drive ou upload local).

## üéØ Funcionalidades

### 1. Gera√ß√£o de Imagens
- **Modelo**: Gemini 2.5 Flash Image (Nano Banana) via Replicate
- **Inputs**:
  - Prompt de texto (obrigat√≥rio)
  - Aspect ratio: 1:1, 16:9, 9:16, 4:5
  - At√© 3 imagens de refer√™ncia (opcional)
- **Output**: PNG em alta qualidade armazenado no Vercel Blob

### 2. Imagens de Refer√™ncia
Suporta dois m√©todos de sele√ß√£o:

#### Google Drive
- Modal multi-sele√ß√£o integrado com navega√ß√£o de pastas
- Preview de thumbnails
- Contador visual de sele√ß√£o (X/3 imagens)
- Limite de 3 imagens

#### Upload Local
- Drag & drop de arquivos
- Sele√ß√£o por clique
- Preview de thumbnails
- Valida√ß√£o de tipo (apenas imagens)
- Limite combinado de 3 imagens (Google Drive + local)

### 3. Gerenciamento de Cr√©ditos
- **Custo**: Configurado no sistema de cr√©ditos (feature: `ai_image_generation`)
- **Valida√ß√£o**: Antes da gera√ß√£o
- **Dedu√ß√£o**: Ap√≥s sucesso da gera√ß√£o
- **Detalhes registrados**: mode, prompt, aiImageId, aspectRatio

## üèóÔ∏è Arquitetura

### Fluxo de Gera√ß√£o

```
[Frontend] ai-images-panel.tsx
    ‚Üì
1. Valida inputs (prompt, limite de imagens)
2. Upload de imagens locais ‚Üí /api/upload
3. Converte imagens do Drive ‚Üí URLs completas
4. Combina todas as URLs de refer√™ncia
    ‚Üì
[Backend] /api/ai/generate-image
    ‚Üì
5. Autentica usu√°rio (Clerk)
6. Verifica ownership do projeto
7. Valida cr√©ditos
8. Upload de refer√™ncias ‚Üí Vercel Blob (p√∫blicas)
9. Cria prediction no Replicate
10. Aguarda conclus√£o (polling 60s)
11. Upload da imagem gerada ‚Üí Vercel Blob
12. Salva no banco de dados
13. Deduz cr√©ditos
    ‚Üì
[Database] AIGeneratedImage
```

### Processamento de Imagens de Refer√™ncia

**Problema**: Replicate API n√£o consegue acessar URLs locais ou autenticadas.

**Solu√ß√£o**: Upload intermedi√°rio para Vercel Blob

```
Google Drive Image              Local File Upload
       ‚Üì                              ‚Üì
   [Cookie Auth]                [FormData]
       ‚Üì                              ‚Üì
/api/google-drive/image      /api/upload
       ‚Üì                              ‚Üì
  Fetch com cookie          Valida√ß√£o + Upload
       ‚Üì                              ‚Üì
   ArrayBuffer                 Vercel Blob
       ‚Üì                              ‚Üì
   Vercel Blob                Public URL
       ‚Üì                              ‚Üì
    Public URL                        ‚Üì
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
            [Replicate API]
             image_input: [url1, url2, url3]
```

## üìÇ Estrutura de Arquivos

### Frontend

#### `/src/components/templates/sidebar/ai-images-panel.tsx`
Painel principal de gera√ß√£o de IA no editor.

**Responsabilidades**:
- Interface de gera√ß√£o (prompt, aspect ratio)
- Sele√ß√£o de imagens de refer√™ncia
- Upload de arquivos locais com drag & drop
- Preview de imagens selecionadas
- Exibi√ß√£o de imagens geradas
- Integra√ß√£o com canvas (adicionar imagem ao design)

**Estados principais**:
```typescript
const [prompt, setPrompt] = useState('')
const [aspectRatio, setAspectRatio] = useState('1:1')
const [referenceImages, setReferenceImages] = useState<GoogleDriveItem[]>([])
const [localFiles, setLocalFiles] = useState<File[]>([])
const [isDragging, setIsDragging] = useState(false)
```

**Handlers importantes**:
```typescript
handleGenerate()          // Processa e envia para API
handleFileSelect()        // Valida e adiciona arquivos locais
handleDragOver()          // Visual feedback do drag
handleDragLeave()         // Remove feedback visual
handleDrop()              // Processa arquivos dropados
handleRemoveLocalFile()   // Remove arquivo local
handleRemoveReferenceImage() // Remove imagem do Drive
handleInsertToCanvas()    // Adiciona imagem ao design
```

#### `/src/components/projects/google-drive-folder-selector.tsx`
Modal de navega√ß√£o e sele√ß√£o do Google Drive com suporte multi-sele√ß√£o.

**Props para multi-sele√ß√£o**:
```typescript
interface DesktopGoogleDriveModalProps {
  multiSelect?: boolean
  maxSelection?: number
  selectedItems?: GoogleDriveItem[]
  onMultiSelectConfirm?: (items: GoogleDriveItem[]) => void
}
```

**Modo Multi-Sele√ß√£o**:
- Click em item: toggle sele√ß√£o (apenas arquivos, n√£o pastas)
- Footer: mostra contador "X / 3 imagens"
- Bot√£o: "Confirmar Sele√ß√£o" em vez de "Selecionar"
- Double-click: desabilitado em multi-select

**Importante**: Verifica√ß√£o de tipo correta
```typescript
// ‚ùå Errado: 'image' n√£o existe no tipo
if (item.kind !== 'image') return

// ‚úÖ Correto: excluir pastas
if (item.kind === 'folder') return
```

### Backend

#### `/src/app/api/ai/generate-image/route.ts`
Endpoint principal de gera√ß√£o de imagens.

**Fluxo**:
1. **Autentica√ß√£o**: Verifica userId com Clerk
2. **Valida√ß√£o**: Zod schema para inputs
3. **Ownership**: Verifica se projeto pertence ao usu√°rio
4. **Cr√©ditos**: Valida antes de processar
5. **Upload Refs**: Converte URLs para Vercel Blob p√∫blicas
6. **Replicate**: Cria prediction com par√¢metros
7. **Polling**: Aguarda conclus√£o (max 60s)
8. **Upload Final**: Salva imagem gerada no Vercel Blob
9. **Persist√™ncia**: Cria registro no banco
10. **Cr√©ditos**: Deduz ap√≥s sucesso

**Schema de Valida√ß√£o**:
```typescript
const generateImageSchema = z.object({
  projectId: z.number(),
  prompt: z.string().min(1, 'Prompt √© obrigat√≥rio'),
  aspectRatio: z.string().default('1:1'),
  referenceImages: z.array(z.string()).optional(),
})
```

**Replicate Configuration**:
```typescript
const NANO_BANANA_VERSION = '1b00a781b969984d0336047c859f06a54097bc7b5e9494ccd307ebde81094c34'

const inputData = {
  prompt: params.prompt,
  aspect_ratio: params.aspectRatio,
  output_format: 'png',
  image_input: publicReferenceUrls // URLs p√∫blicas do Vercel Blob
}
```

**Cookie Forwarding** (para Google Drive):
```typescript
const cookie = request.headers.get('cookie')
const response = await fetch(url, {
  headers: cookie ? { cookie } : {}
})
```

#### `/src/app/api/upload/route.ts`
Endpoint de upload de arquivos locais para Vercel Blob.

**Responsabilidades**:
- Autentica√ß√£o com Clerk
- Valida√ß√£o de FormData
- Verifica√ß√£o de tipo de arquivo (apenas imagens)
- Upload para Vercel Blob com acesso p√∫blico
- Retorno de URL p√∫blica

**Input**: FormData com campo 'file'
**Output**: `{ url: string }`

```typescript
const fileName = `upload-${Date.now()}-${file.name}`
const blob = await put(fileName, file, {
  access: 'public',
  contentType: file.type,
})
```

#### `/src/app/api/projects/[projectId]/ai-images/route.ts`
Endpoint para listar imagens IA de um projeto.

**M√©todo**: GET
**Autentica√ß√£o**: Obrigat√≥ria
**Valida√ß√£o**: Ownership do projeto
**Response**: Array de AIGeneratedImage ordenado por data (desc)

### Database

#### Modelo `AIGeneratedImage`

```prisma
model AIGeneratedImage {
  id            Int      @id @default(autoincrement())
  projectId     Int
  name          String
  prompt        String   @db.Text
  mode          AIMode   @default(GENERATE)
  fileUrl       String
  thumbnailUrl  String?
  width         Int
  height        Int
  aspectRatio   String   @default("1:1")
  provider      String   @default("replicate")
  model         String   @default("nano-banana")
  predictionId  String?
  createdBy     String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  project       Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([projectId])
  @@index([createdBy])
  @@index([createdAt])
}

enum AIMode {
  GENERATE
  EDIT
  UPSCALE
}
```

**Campos importantes**:
- `mode`: Tipo de opera√ß√£o (atualmente apenas GENERATE)
- `aspectRatio`: Propor√ß√£o da imagem gerada
- `provider`: "replicate" (fixo)
- `model`: "nano-banana" (Gemini 2.5 Flash Image)
- `predictionId`: ID da prediction no Replicate (para tracking)

## üîß Configura√ß√£o

### Environment Variables

**Obrigat√≥rias**:

```env
# Replicate API (OBRIGAT√ìRIA para gera√ß√£o de imagens)
# Obtenha em: https://replicate.com/account/api-tokens
REPLICATE_API_TOKEN=r8_***

# Vercel Blob (upload de imagens)
BLOB_READ_WRITE_TOKEN=vercel_blob_***

# URL da aplica√ß√£o (para convers√£o de URLs relativas)
NEXT_PUBLIC_APP_URL=https://studio-lagosta.com
```

### Setup Passo a Passo

1. **Criar conta no Replicate**
   - Acesse [replicate.com](https://replicate.com)
   - Crie uma conta gratuita ou fa√ßa login

2. **Obter API Token**
   - V√° para [Account Settings ‚Üí API Tokens](https://replicate.com/account/api-tokens)
   - Clique em "Create token"
   - Copie o token (come√ßa com `r8_`)

3. **Configurar vari√°vel de ambiente**
   - Adicione ao seu arquivo `.env`:
   ```
   REPLICATE_API_TOKEN=r8_seu_token_aqui
   ```

4. **Reiniciar servidor de desenvolvimento**
   ```bash
   npm run dev
   ```

### Valida√ß√£o da Configura√ß√£o

A API valida automaticamente se a `REPLICATE_API_TOKEN` est√° configurada antes de processar qualquer requisi√ß√£o. Se n√£o estiver configurada, retorna:

```json
{
  "error": "Gera√ß√£o de imagens n√£o configurada. Entre em contato com o administrador.",
  "status": 503
}
```

### Troubleshooting

**Erro: "Gera√ß√£o de imagens n√£o configurada"**
- ‚úÖ Verifique se a vari√°vel `REPLICATE_API_TOKEN` existe no arquivo `.env`
- ‚úÖ Certifique-se de que o token come√ßa com `r8_`
- ‚úÖ Reinicie o servidor ap√≥s adicionar a vari√°vel

**Erro: "Replicate API error"**
- ‚úÖ Verifique se o token √© v√°lido
- ‚úÖ Confirme que sua conta Replicate tem cr√©ditos
- ‚úÖ Verifique logs do servidor para detalhes do erro

### Custos de Cr√©ditos

Configurado em `/src/lib/credits/feature-config.ts`:

```typescript
export const FEATURE_CREDIT_COSTS = {
  ai_image_generation: 10, // Custo por imagem gerada
  // ...
}
```

## üé® UI/UX

### Interface do Painel

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Painel "IA ‚ú®"                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                 ‚îÇ
‚îÇ [Textarea] Descreva a imagem... ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ Aspect Ratio: [1:1 ‚ñº]          ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ IMAGENS DE REFER√äNCIA       ‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ
‚îÇ ‚îÇ [Google Drive] [Upload ‚Üë]   ‚îÇ ‚îÇ
‚îÇ ‚îÇ                             ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇimg1‚îÇ ‚îÇimg2‚îÇ ‚îÇ +  ‚îÇ       ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ [Gerar Imagem]                  ‚îÇ
‚îÇ                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ IMAGENS GERADAS                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ
‚îÇ ‚îÇimg1 ‚îÇ ‚îÇimg2 ‚îÇ                ‚îÇ
‚îÇ ‚îÇ [+] ‚îÇ ‚îÇ [+] ‚îÇ                ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Drag & Drop Visual

```typescript
<div
  className={cn(
    "border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors",
    isDragging ? "border-primary bg-primary/5" : "border-border hover:border-primary/50",
    disabled && "opacity-50 cursor-not-allowed"
  )}
  onDragOver={handleDragOver}
  onDragLeave={handleDragLeave}
  onDrop={handleDrop}
  onClick={() => fileInputRef.current?.click()}
>
  <Upload className="h-8 w-8 mx-auto mb-2 text-muted-foreground" />
  <p className="text-sm text-muted-foreground">
    Arraste imagens aqui ou clique para selecionar
  </p>
  <p className="text-xs text-muted-foreground mt-1">
    {totalImages}/3 imagens
  </p>
</div>
```

### Preview de Imagens

**Google Drive**:
```typescript
<div className="relative group">
  <img
    src={`/api/google-drive/image/${img.id}`}
    alt={img.name}
    className="w-full h-full object-cover rounded"
  />
  <Button
    variant="destructive"
    size="icon"
    className="absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100"
    onClick={() => handleRemoveReferenceImage(img.id)}
  >
    <X className="h-4 w-4" />
  </Button>
</div>
```

**Local Files**:
```typescript
<div className="relative group">
  <img
    src={URL.createObjectURL(file)}
    alt={file.name}
    className="w-full h-full object-cover rounded"
  />
  <Button
    variant="destructive"
    size="icon"
    className="absolute top-1 right-1 h-6 w-6 opacity-0 group-hover:opacity-100"
    onClick={() => handleRemoveLocalFile(index)}
  >
    <X className="h-4 w-4" />
  </Button>
</div>
```

## üîÑ Hooks e Data Fetching

### `useAIGenerateImage`

```typescript
export function useAIGenerateImage() {
  const queryClient = useQueryClient()

  return useMutation({
    mutationFn: async (data: {
      prompt: string
      aspectRatio: string
      referenceImages?: string[]
    }) => {
      return api.post('/api/ai/generate-image', {
        projectId: currentProjectId,
        ...data
      })
    },
    onSuccess: (data, variables) => {
      queryClient.invalidateQueries({
        queryKey: ['ai-images', currentProjectId]
      })
      toast({
        description: 'Imagem gerada com sucesso!'
      })
    },
    onError: (error: ApiError) => {
      if (error.status === 402) {
        toast({
          variant: 'destructive',
          description: 'Cr√©ditos insuficientes'
        })
      } else {
        toast({
          variant: 'destructive',
          description: error.message || 'Erro ao gerar imagem'
        })
      }
    }
  })
}
```

### `useAIImages`

```typescript
export function useAIImages(projectId: number) {
  return useQuery({
    queryKey: ['ai-images', projectId],
    queryFn: () => api.get(`/api/projects/${projectId}/ai-images`),
    staleTime: 30_000, // 30 segundos
    gcTime: 5 * 60_000, // 5 minutos
    enabled: !!projectId
  })
}
```

## üêõ Troubleshooting

### Problemas Comuns

#### 1. Erro 401 ao buscar imagens do Google Drive
**Causa**: Server-side fetch sem cookie de autentica√ß√£o
**Solu√ß√£o**: Forward cookie do request original
```typescript
const cookie = request.headers.get('cookie')
const response = await fetch(url, {
  headers: cookie ? { cookie } : {}
})
```

#### 2. Replicate E6716 Error
**Causa**: Replicate n√£o consegue acessar localhost ou URLs privadas
**Solu√ß√£o**: Upload para Vercel Blob antes de enviar para Replicate

#### 3. Sele√ß√£o de m√∫ltiplas imagens n√£o funciona
**Causa**: Verifica√ß√£o incorreta de `item.kind`
**Solu√ß√£o**: Usar `if (item.kind === 'folder') return` em vez de `if (item.kind !== 'image')`

#### 4. Duplicate key warning
**Causa**: Mesmo `id` usado para m√∫ltiplas imagens
**Solu√ß√£o**: Combinar id com index: `key={`ref-${img.id}-${index}`}`

#### 5. Pastas sendo selecionadas como imagens
**Causa**: Falta de valida√ß√£o no handleItemClick
**Solu√ß√£o**: Early return para pastas:
```typescript
if (item.kind === 'folder') return
```

## üìä Performance

### Otimiza√ß√µes Implementadas

1. **Caching de Queries**: 30s staleTime para lista de imagens
2. **Preview Otimizado**: `URL.createObjectURL()` para arquivos locais
3. **Lazy Loading**: Imagens carregam sob demanda
4. **Polling Eficiente**: 1s interval, max 60 tentativas
5. **Invalida√ß√£o Seletiva**: Apenas query espec√≠fica do projeto

### M√©tricas Esperadas

- **Upload local ‚Üí Vercel Blob**: ~1-2s por imagem
- **Google Drive ‚Üí Vercel Blob**: ~2-3s por imagem
- **Gera√ß√£o Replicate**: ~10-30s dependendo da complexidade
- **Total (sem refs)**: ~15-35s
- **Total (com 3 refs)**: ~25-45s

## üîê Seguran√ßa

### Valida√ß√µes Implementadas

1. **Autentica√ß√£o**: Todas as rotas validam userId
2. **Ownership**: Verifica se projeto pertence ao usu√°rio
3. **Input Validation**: Zod schemas para todos os inputs
4. **File Type**: Valida que uploads s√£o imagens
5. **Rate Limiting**: Via sistema de cr√©ditos
6. **Public URLs**: Apenas URLs do Vercel Blob enviadas para Replicate

### Best Practices

- Nunca expor REPLICATE_API_TOKEN no frontend
- Sempre validar ownership antes de opera√ß√µes
- Sanitizar URLs de refer√™ncia
- Limitar tamanho de upload de arquivos
- Implementar timeout em polling

## üöÄ Melhorias Futuras

### Planejadas
- [ ] Suporte para modo EDIT (editar imagem existente)
- [ ] Suporte para modo UPSCALE (aumentar resolu√ß√£o)
- [ ] Mais aspect ratios (3:4, 21:9, etc)
- [ ] Hist√≥rico de prompts
- [ ] Favoritar imagens geradas
- [ ] Organiza√ß√£o em cole√ß√µes
- [ ] Busca por prompt
- [ ] Filtros por aspect ratio

### Consideradas
- [ ] Background removal integrado
- [ ] Batch generation (m√∫ltiplas varia√ß√µes)
- [ ] Negative prompts
- [ ] Seed control para reproduzibilidade
- [ ] Integra√ß√£o com outras AIs (DALL-E, Midjourney)
- [ ] Export direto para template

## üìö Refer√™ncias

### Documenta√ß√£o Externa
- [Replicate API Docs](https://replicate.com/docs)
- [Nano Banana Model](https://replicate.com/cjwbw/nano-banana)
- [Vercel Blob Docs](https://vercel.com/docs/storage/vercel-blob)
- [Google Drive API](https://developers.google.com/drive/api/guides/about-sdk)

### Documenta√ß√£o Interna
- [Projects & Templates](./projects-templates.md)
- [Konva Editor](./konva-editor.md)
- [Credits System](./credits.md)
- [API Reference](./api.md)
- [Upload System](./uploads.md)

---

**√öltima atualiza√ß√£o**: 2025-10-07
**Vers√£o**: 1.0
**Autor**: Studio Lagosta Team
