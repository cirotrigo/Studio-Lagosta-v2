import { PrismaClient } from './generated/client'

const prisma = new PrismaClient()

async function main() {
  console.log('üå± Seeding CMS data...')

  // Get or create a system user for seeding
  const systemUser = await prisma.user.findFirst({
    where: { email: 'suporte@aicoders.academy' },
  })

  const createdBy = systemUser?.clerkId || 'system'

  // Create Home Page
  console.log('üìÑ Creating home page...')
  const homePage = await prisma.cMSPage.upsert({
    where: { slug: 'home' },
    update: {},
    create: {
      title: 'P√°gina Inicial',
      slug: 'home',
      path: '/',
      description: 'P√°gina inicial do Studio Lagosta',
      status: 'PUBLISHED',
      isHome: true,
      metaTitle: 'Lagosta Criativa - Studio',
      metaDesc:
        'Template Next.js pronto para produ√ß√£o pela AI Coders Academy: autentica√ß√£o, banco de dados, pagamentos e sistema de cr√©ditos inclu√≠dos.',
      ogImage: '/og-image.png',
      publishedAt: new Date(),
      createdBy,
    },
  })
  console.log('‚úÖ Home page created:', homePage.id)

  // Create Hero Section
  console.log('ü¶∏ Creating hero section...')
  const heroSection = await prisma.cMSSection.create({
    data: {
      pageId: homePage.id,
      type: 'HERO',
      name: 'Hero Principal',
      order: 0,
      isVisible: true,
      content: {
        badge: {
          text: 'Constru√≠do com AI Coders Academy',
          link: 'https://aicoders.academy',
        },
        title: {
          lines: [
            'O jeito mais r√°pido',
            'de construir seu',
            'pr√≥ximo',
            { text: 'SaaS', gradient: true },
          ],
        },
        description:
          'Template completo com autentica√ß√£o, banco de dados, sistema de cr√©ditos, pagamentos e muito mais. Comece a construir em minutos, n√£o em semanas.',
        ctas: [
          {
            text: 'Come√ßar Gr√°tis',
            href: '/sign-up',
            variant: 'default',
          },
          {
            text: 'Ver Demo',
            href: '#features',
            variant: 'outline',
          },
        ],
        backgroundImage: {
          light: '/grid-light.svg',
          dark: '/grid-dark.svg',
        },
        centerImage: {
          src: '/dashboard-preview.png',
          alt: 'Dashboard Preview',
          width: 800,
          height: 500,
        },
        clients: {
          title: 'Confiado por desenvolvedores ao redor do mundo',
          logos: [
            { src: '/client-1.svg', alt: 'Cliente 1' },
            { src: '/client-2.svg', alt: 'Cliente 2' },
            { src: '/client-3.svg', alt: 'Cliente 3' },
            { src: '/client-4.svg', alt: 'Cliente 4' },
            { src: '/client-5.svg', alt: 'Cliente 5' },
          ],
        },
      },
    },
  })
  console.log('‚úÖ Hero section created:', heroSection.id)

  // Create BentoGrid Section
  console.log('üé® Creating bento grid section...')
  const bentoSection = await prisma.cMSSection.create({
    data: {
      pageId: homePage.id,
      type: 'BENTO_GRID',
      name: 'Grid de Recursos',
      order: 1,
      isVisible: true,
      content: {
        title: 'Tudo que voc√™ precisa para come√ßar',
        subtitle: 'Padr√µes amig√°veis para produ√ß√£o, padr√µes extens√≠veis e uma interface de usu√°rio limpa.',
        features: [
          {
            icon: 'Shield',
            title: 'Autentica√ß√£o',
            description: 'Sistema completo de autentica√ß√£o com Clerk',
            gridArea: '1 / 1 / 2 / 2',
          },
          {
            icon: 'Database',
            title: 'Banco de Dados',
            description: 'PostgreSQL com Prisma ORM',
            gridArea: '1 / 2 / 2 / 3',
          },
          {
            icon: 'CreditCard',
            title: 'Pagamentos',
            description: 'Integra√ß√£o com Stripe pronta',
            gridArea: '1 / 3 / 2 / 4',
          },
          {
            icon: 'Zap',
            title: 'Sistema de Cr√©ditos',
            description: 'Controle de uso e limites',
            gridArea: '2 / 1 / 3 / 2',
          },
          {
            icon: 'Palette',
            title: 'UI/UX Moderno',
            description: 'Tailwind CSS + Radix UI',
            gridArea: '2 / 2 / 3 / 3',
          },
          {
            icon: 'Code',
            title: 'TypeScript',
            description: 'Type-safe de ponta a ponta',
            gridArea: '2 / 3 / 3 / 4',
          },
          {
            icon: 'Rocket',
            title: 'Deploy R√°pido',
            description: 'Configurado para Vercel',
            gridArea: '3 / 1 / 4 / 2',
          },
          {
            icon: 'BarChart',
            title: 'Analytics',
            description: 'Rastreamento de uso integrado',
            gridArea: '3 / 2 / 4 / 3',
          },
          {
            icon: 'Mail',
            title: 'Sistema de Emails',
            description: 'Templates prontos para uso',
            gridArea: '3 / 3 / 4 / 4',
          },
          {
            icon: 'Settings',
            title: 'Painel Admin',
            description: 'Gerenciamento completo',
            gridArea: '4 / 1 / 5 / 2',
          },
          {
            icon: 'FileText',
            title: 'Documenta√ß√£o',
            description: 'Guias completos inclu√≠dos',
            gridArea: '4 / 2 / 5 / 3',
          },
          {
            icon: 'Sparkles',
            title: 'E muito mais...',
            description: 'Descubra todos os recursos',
            gridArea: '4 / 3 / 5 / 4',
          },
        ],
      },
    },
  })
  console.log('‚úÖ Bento grid section created:', bentoSection.id)

  // Create AI Starter Section
  console.log('ü§ñ Creating AI starter section...')
  const aiStarterSection = await prisma.cMSSection.create({
    data: {
      pageId: homePage.id,
      type: 'AI_STARTER',
      name: 'Compatibilidade com IA',
      order: 2,
      isVisible: true,
      content: {
        badge: 'Compat√≠vel com as melhores ferramentas de IA',
        title: 'Construa com as melhores ferramentas de IA',
        subtitle: 'Integre facilmente com as principais plataformas de IA do mercado',
        tools: [
          { name: 'OpenAI', logo: '/logos/openai.svg' },
          { name: 'Anthropic', logo: '/logos/anthropic.svg' },
          { name: 'Google AI', logo: '/logos/google-ai.svg' },
          { name: 'Hugging Face', logo: '/logos/huggingface.svg' },
          { name: 'Replicate', logo: '/logos/replicate.svg' },
          { name: 'Cohere', logo: '/logos/cohere.svg' },
        ],
        cards: [
          {
            icon: 'Brain',
            title: 'IA Integrada',
            description: 'Conecte-se facilmente com modelos de linguagem avan√ßados',
          },
          {
            icon: 'Workflow',
            title: 'Automa√ß√£o',
            description: 'Automatize tarefas complexas com IA',
          },
          {
            icon: 'TrendingUp',
            title: 'Escal√°vel',
            description: 'Cres√ßa sem limites com infraestrutura pronta',
          },
        ],
      },
    },
  })
  console.log('‚úÖ AI starter section created:', aiStarterSection.id)

  // Create FAQ Section
  console.log('‚ùì Creating FAQ section...')
  const faqSection = await prisma.cMSSection.create({
    data: {
      pageId: homePage.id,
      type: 'FAQ',
      name: 'Perguntas Frequentes',
      order: 4,
      isVisible: true,
      content: {
        title: 'Perguntas Frequentes',
        subtitle: 'Tudo que voc√™ precisa saber sobre o Studio Lagosta',
        faqs: [
          {
            question: 'O que est√° inclu√≠do no template?',
            answer:
              'O template inclui autentica√ß√£o completa com Clerk, banco de dados PostgreSQL configurado com Prisma, sistema de cr√©ditos, integra√ß√£o com Stripe, painel administrativo, UI/UX moderna com Tailwind CSS e Radix UI, e muito mais.',
          },
          {
            question: 'Posso usar em projetos comerciais?',
            answer:
              'Sim! Voc√™ pode usar o template em quantos projetos comerciais quiser. A licen√ßa permite uso ilimitado.',
          },
          {
            question: 'Recebo atualiza√ß√µes?',
            answer:
              'Sim, voc√™ receber√° todas as atualiza√ß√µes futuras do template gratuitamente.',
          },
          {
            question: 'Qual suporte est√° dispon√≠vel?',
            answer:
              'Oferecemos suporte via Discord, documenta√ß√£o completa e tutoriais em v√≠deo.',
          },
          {
            question: 'Preciso de conhecimento avan√ßado?',
            answer:
              'Conhecimento b√°sico de Next.js e TypeScript √© recomendado. A documenta√ß√£o inclui guias passo a passo.',
          },
          {
            question: 'Como funciona o sistema de cr√©ditos?',
            answer:
              'O sistema de cr√©ditos permite controlar o uso de recursos por usu√°rio. √â totalmente customiz√°vel e pode ser integrado com qualquer servi√ßo.',
          },
        ],
      },
    },
  })
  console.log('‚úÖ FAQ section created:', faqSection.id)

  // Create Pricing Section (reference to existing plans)
  console.log('üí∞ Creating pricing section...')
  const pricingSection = await prisma.cMSSection.create({
    data: {
      pageId: homePage.id,
      type: 'PRICING',
      name: 'Planos e Pre√ßos',
      order: 3,
      isVisible: true,
      content: {
        title: 'Escolha o plano ideal para voc√™',
        subtitle: 'Comece gr√°tis e escale conforme cresce',
        displayMode: 'from_database',
      },
    },
  })
  console.log('‚úÖ Pricing section created:', pricingSection.id)

  // Create Main Menu
  console.log('üçî Creating main menu...')
  const mainMenu = await prisma.cMSMenu.upsert({
    where: { slug: 'main-menu' },
    update: {},
    create: {
      name: 'Menu Principal',
      slug: 'main-menu',
      location: 'header',
      isActive: true,
    },
  })

  // Create Menu Items
  const menuItems = [
    { label: 'Recursos', url: '#features', order: 0 },
    { label: 'Pre√ßos', url: '#pricing', order: 1 },
    { label: 'FAQ', url: '#faq', order: 2 },
    { label: 'Sobre', url: '/', order: 3 },
  ]

  for (const item of menuItems) {
    await prisma.cMSMenuItem.create({
      data: {
        menuId: mainMenu.id,
        label: item.label,
        url: item.url,
        order: item.order,
        isVisible: true,
      },
    })
  }
  console.log('‚úÖ Main menu created with', menuItems.length, 'items')

  console.log('üéâ Seeding completed successfully!')
}

main()
  .catch((e) => {
    console.error('‚ùå Seeding failed:', e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
